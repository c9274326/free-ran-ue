<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5G Fast PDU Session Cleanup - å³æ™‚ç›£æ§ç³»çµ±</title>
    <meta name="description" content="Free5GC Fast PDU Session Cleanup å³æ™‚ç›£æ§å„€è¡¨æ¿">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Background Effects -->
    <div class="bg-gradient"></div>
    <div class="grid-overlay"></div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo-icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                            <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                        </svg>
                    </div>
                    <div>
                        <h1 class="logo-title">5G Fast PDU Session Cleanup</h1>
                        <p class="logo-subtitle">Intelligent Session Management System</p>
                    </div>
                </div>
                <div class="header-actions">
                    <div class="status-badge status-active">
                        <span class="status-dot"></span>
                        System Active
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">

            <!-- Hero Section -->
            <section class="hero-section">
                <div class="hero-content">
                    <h2 class="hero-title">Fast PDU Session Cleanup</h2>
                    <p class="hero-description">

                    </p>
                    <div class="hero-stats">
                        <div class="stat-card">
                            <div class="stat-icon">âš¡</div>
                            <div class="stat-value" id="totalSessions">0</div>
                            <div class="stat-label">Existing Sessions</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ”„</div>
                            <div class="stat-value" id="cleanedSessions">0</div>
                            <div class="stat-label">Cleaned Sessions</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ“Š</div>
                            <div class="stat-value" id="avgIdleTime">0s</div>
                            <div class="stat-label">Avg Idle Time</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">âœ…</div>
                            <div class="stat-value" id="successRate">100%</div>
                            <div class="stat-label">Success Rate</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Architecture Overview -->
            <section class="architecture-section">
                <h2 class="section-title">
                    <span class="title-icon">ğŸ—ï¸</span>
                    ç³»çµ±æ¶æ§‹
                </h2>
                <div class="architecture-diagram" id="architectureDiagram">
                    <!-- Will be populated by JavaScript -->
                </div>
            </section>

            <!-- Live Session Monitor -->
            <section class="monitor-section">
                <h2 class="section-title">
                    <span class="title-icon">ğŸ“¡</span>
                    å³æ™‚ Session ç›£æ§
                </h2>
                <div class="monitor-grid">
                    <div class="monitor-card">
                        <div class="card-header">
                            <h3>PDU Sessions</h3>
                            <button class="btn-refresh" onclick="refreshSessions()">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path
                                        d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2" />
                                </svg>
                            </button>
                        </div>
                        <div class="sessions-list" id="sessionsList">
                            <!-- Sessions will be populated here -->
                        </div>
                    </div>

                    <div class="monitor-card">
                        <div class="card-header">
                            <h3>Cleanup Timeline</h3>
                        </div>
                        <div class="timeline" id="cleanupTimeline">
                            <!-- Timeline events will be populated here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Feature Showcase -->
            <section class="features-section">
                <h2 class="section-title">
                    <span class="title-icon">âœ¨</span>
                    æ ¸å¿ƒåŠŸèƒ½ç‰¹é»
                </h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ¯</div>
                        <h3>åŸºæ–¼æµé‡çš„é–’ç½®æª¢æ¸¬</h3>
                        <p>é€é UPF çš„ URR (Usage Reporting Rule) å›å ±ä¾†åµæ¸¬å¯¦éš›æµé‡ï¼Œåƒ…åœ¨æœ‰å¯¦éš›è³‡æ–™å‚³è¼¸æ™‚æ‰æ›´æ–° LastActiveTime</p>
                        <div class="feature-code">
                            <code>hasActualTraffic(usageReport)</code>
                        </div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">âš™ï¸</div>
                        <h3>å¯é…ç½®çš„å·®ç•°åŒ–ç­–ç•¥</h3>
                        <p>æ”¯æ´å…¨åŸŸé è¨­è¶…æ™‚å’ŒåŸºæ–¼å­ç¶²çš„å·®ç•°åŒ–è¶…æ™‚ç­–ç•¥ï¼Œéˆæ´»é©æ‡‰ä¸åŒæ‡‰ç”¨å ´æ™¯</p>
                        <div class="feature-code">
                            <code>GetIdleTimeoutForIP(ip)</code>
                        </div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">ğŸ”’</div>
                        <h3>å®‰å…¨çš„ Session é‡‹æ”¾</h3>
                        <p>é€éå›èª¿å‡½æ•¸æ©Ÿåˆ¶ç¢ºä¿æ­£ç¢ºçš„è³‡æºæ¸…ç†ï¼ŒåŒ…æ‹¬ PFCP Sessionã€UPF Tunnelã€TUN ä»‹é¢ç­‰</p>
                        <div class="feature-code">
                            <code>NetworkInitiatedRelease()</code>
                        </div>
                    </div>


                </div>
            </section>

            <!-- Message Flow Visualization -->
            <section class="flow-section">
                <h2 class="section-title">
                    <span class="title-icon">ğŸ”„</span>
                    è¨Šæ¯æµç¨‹è¦–è¦ºåŒ–
                </h2>
                <div class="flow-container">
                    <div class="flow-diagram" id="messageFlow">
                        <!-- Message flow will be animated here -->
                    </div>
                    <div class="flow-controls">
                        <button class="btn-primary" onclick="startFlowAnimation()">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M8 5v14l11-7z" />
                            </svg>
                            æ’­æ”¾æµç¨‹å‹•ç•«
                        </button>
                        <button class="btn-secondary" onclick="resetFlowAnimation()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path
                                    d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2" />
                            </svg>
                            é‡ç½®
                        </button>
                    </div>
                </div>
            </section>

            <!-- Technical Details -->
            <section class="technical-section">
                <h2 class="section-title">
                    <span class="title-icon">ğŸ”§</span>
                    æŠ€è¡“å¯¦ä½œç´°ç¯€
                </h2>
                <div class="technical-grid">
                    <div class="technical-card">
                        <h3>SMF ç«¯å¯¦ä½œ</h3>
                        <ul class="technical-list">
                            <li>
                                <span class="list-icon">ğŸ“„</span>
                                <div>
                                    <strong>session_cleaner.go</strong>
                                    <p>Session æ¸…ç†å™¨å®Œæ•´å¯¦ä½œï¼Œå®šæœŸæƒæé–’ç½® Session</p>
                                </div>
                            </li>
                            <li>
                                <span class="list-icon">ğŸ“„</span>
                                <div>
                                    <strong>cleanup_policy.go</strong>
                                    <p>æ¸…ç†ç­–ç•¥ç®¡ç†ï¼Œæ”¯æ´å­ç¶²å·®ç•°åŒ–é…ç½®</p>
                                </div>
                            </li>
                            <li>
                                <span class="list-icon">ğŸ“„</span>
                                <div>
                                    <strong>resource_release.go</strong>
                                    <p>ç¶²è·¯ç™¼èµ·é‡‹æ”¾åŠŸèƒ½ï¼Œé€é NGAP é€šçŸ¥ AMF</p>
                                </div>
                            </li>
                            <li>
                                <span class="list-icon">ğŸ“„</span>
                                <div>
                                    <strong>pfcp_reports.go</strong>
                                    <p>æµé‡æª¢æ¸¬å‡½æ•¸ï¼Œåˆ†æ URR å›å ±</p>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="technical-card">
                        <h3>UE ç«¯å¯¦ä½œ</h3>
                        <ul class="technical-list">
                            <li>
                                <span class="list-icon">ğŸ“„</span>
                                <div>
                                    <strong>ngapDispatcher.go</strong>
                                    <p>NGAP PDU Session Resource Release è™•ç†å™¨</p>
                                </div>
                            </li>
                            <li>
                                <span class="list-icon">ğŸ“„</span>
                                <div>
                                    <strong>ngapBuilder.go</strong>
                                    <p>å»ºæ§‹ PDU Session Resource Release Response</p>
                                </div>
                            </li>
                            <li>
                                <span class="list-icon">ğŸ“„</span>
                                <div>
                                    <strong>ue.go</strong>
                                    <p>NAS è¨Šæ¯è§£å¯†èˆ‡ PDU Session Release è™•ç†</p>
                                </div>
                            </li>
                            <li>
                                <span class="list-icon">ğŸ“„</span>
                                <div>
                                    <strong>TUN ç®¡ç†</strong>
                                    <p>æ­£ç¢ºé—œé–‰ TUN ä»‹é¢ï¼Œé¿å…æ®­å±é€£ç·š</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Test Results -->
            <section class="results-section">
                <h2 class="section-title">
                    <span class="title-icon">ğŸ“Š</span>
                    æ¸¬è©¦çµæœ
                </h2>
                <div class="results-grid">
                    <div class="result-card">
                        <div class="result-header">
                            <h3>å–®å…ƒæ¸¬è©¦</h3>
                            <span class="badge badge-success">PASS</span>
                        </div>
                        <div class="result-stats">
                            <div class="result-stat">
                                <span class="stat-number">31</span>
                                <span class="stat-text">ç¸½æ¸¬è©¦æ•¸</span>
                            </div>
                            <div class="result-stat">
                                <span class="stat-number">29</span>
                                <span class="stat-text">é€šé</span>
                            </div>
                            <div class="result-stat">
                                <span class="stat-number">2</span>
                                <span class="stat-text">è·³é</span>
                            </div>
                            <div class="result-stat">
                                <span class="stat-number">0</span>
                                <span class="stat-text">å¤±æ•—</span>
                            </div>
                        </div>
                    </div>

                    <div class="result-card">
                        <div class="result-header">
                            <h3>æ•´åˆæ¸¬è©¦</h3>
                            <span class="badge badge-success">PASS</span>
                        </div>
                        <div class="test-scenarios">
                            <div class="scenario">
                                <span class="scenario-icon">âœ…</span>
                                <span>PDU Session å»ºç«‹èˆ‡ IP åˆ†é…</span>
                            </div>
                            <div class="scenario">
                                <span class="scenario-icon">âœ…</span>
                                <span>æµé‡æ´»å‹•æª¢æ¸¬èˆ‡ LastActiveTime æ›´æ–°</span>
                            </div>
                            <div class="scenario">
                                <span class="scenario-icon">âœ…</span>
                                <span>é–’ç½®è¶…æ™‚å¾Œè‡ªå‹•æ¸…ç†</span>
                            </div>
                            <div class="scenario">
                                <span class="scenario-icon">âœ…</span>
                                <span>ç¶²è·¯å´é‡‹æ”¾è¨Šæ¯è™•ç†</span>
                            </div>
                            <div class="scenario">
                                <span class="scenario-icon">âœ…</span>
                                <span>UE TUN ä»‹é¢æ­£ç¢ºé—œé–‰</span>
                            </div>

                        </div>
                    </div>
                </div>
            </section>

            <!-- Configuration Example -->
            <section class="config-section">
                <h2 class="section-title">
                    <span class="title-icon">âš™ï¸</span>
                    é…ç½®ç¯„ä¾‹
                </h2>
                <div class="config-container">
                    <div class="config-tabs">
                        <button class="tab-btn active" onclick="showConfig('smf')">SMF Config</button>
                        <button class="tab-btn" onclick="showConfig('ue')">UE Config</button>
                    </div>
                    <div class="config-content">
                        <div id="config-smf" class="config-panel active">
                            <pre><code class="language-yaml"># smfcfg.yaml
fastCleanup:
  enabled: true
  defaultIdleTimeout: 3600  # 1 hour
  scanInterval: 30          # 30 seconds
  subnetPolicies:
    - subnet: "10.60.0"
      idleTimeout: 60       # 60 seconds for testing
    - subnet: "10.61.0"
      idleTimeout: 300      # 5 minutes for production</code></pre>
                        </div>
                        <div id="config-ue" class="config-panel">
                            <pre><code class="language-yaml"># ue1.yaml
supi: imsi-208930000000001
mcc: '208'
mnc: '93'
key: '8baf473f2f8fd09487cccbd7097c6862'
op: '8e27b6af0e692e750f32667a3b14605d'
opType: 'OPC'
amf: '8000'
imei: '356938035643803'
imeiSv: '4370816125816151'

# PDU Session configuration
sessions:
  - type: 'IPv4'
    apn: 'internet'
    slice:
      sst: 1
      sd: '010203'</code></pre>
                        </div>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>å°ˆæ¡ˆè³‡è¨Š</h4>
                    <p>Free5GC Fast PDU Session Cleanup</p>
                    <p>æ™ºèƒ½ 5G Session ç®¡ç†ç³»çµ±</p>
                </div>
                <div class="footer-section">
                    <h4>æŠ€è¡“æ£§</h4>
                    <p>Free5GC â€¢ Free-RAN-UE</p>
                    <p>Go â€¢ NGAP â€¢ NAS â€¢ PFCP</p>
                </div>
                <div class="footer-section">
                    <h4>æ–‡ä»¶</h4>
                    <p>fast_cleanup.md</p>
                    <p>fix_pdu_release.md</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 CNDI Final Project. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
</body>

</html>