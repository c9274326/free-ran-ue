# ğŸ”§ çœŸå¯¦æ•¸æ“šæ•´åˆ - ç•¶å‰ç‹€æ…‹

## âœ… å·²å®Œæˆçš„ä¿®æ­£

æˆ‘å·²ç¶“ä¿®æ­£äº†ä»¥ä¸‹å•é¡Œ:

### 1. **API ç«¯å£ä¿®æ­£**
- âŒ ä¹‹å‰: ä½¿ç”¨éŒ¯èª¤çš„ç«¯å£ `29502`
- âœ… ç¾åœ¨: ä½¿ç”¨æ­£ç¢ºçš„ç«¯å£ `8000` (SMF SBI ç«¯å£)

### 2. **SMF é‡æ–°ç·¨è­¯**
- âœ… å·²é‡æ–°ç·¨è­¯ SMF ä»¥è¼‰å…¥æ–°çš„ `/debug/sessions` å’Œ `/debug/stats` API
- âœ… ç·¨è­¯æˆåŠŸï¼Œæ–°çš„ binary ä½æ–¼ `/home/ubuntu/CNDI_final/free5gc/bin/smf`

### 3. **ç©ºç‹€æ…‹è™•ç†**
- âœ… ç•¶æ²’æœ‰ PDU Session æ™‚ï¼Œé¡¯ç¤ºå‹å¥½çš„æç¤ºè¨Šæ¯
- âœ… æä¾›å•Ÿå‹• UE çš„æŒ‡ä»¤
- âœ… åœ¨ Timeline ä¸­é¡¯ç¤º "No Active Sessions" æç¤º

## ğŸ“‹ ä¸‹ä¸€æ­¥æ“ä½œ

### é‡å•Ÿ free5GC ä»¥è¼‰å…¥æ–°çš„ SMF

ç”±æ–¼ SMF å·²é‡æ–°ç·¨è­¯ï¼Œéœ€è¦é‡å•Ÿ free5GC ä¾†è¼‰å…¥æ–°çš„ API endpoints:

```bash
# 1. åœæ­¢ç•¶å‰çš„ free5GC
cd /home/ubuntu/CNDI_final/free5gc
# æŒ‰ Ctrl+C åœæ­¢ ./run.sh

# 2. é‡æ–°å•Ÿå‹• free5GC
./run.sh
```

### å»ºç«‹ PDU Session ä¾†æ¸¬è©¦

```bash
# åœ¨å¦ä¸€å€‹çµ‚ç«¯
cd /home/ubuntu/CNDI_final/free-ran-ue
make ns-ue
```

### é©—è­‰ API æ˜¯å¦å·¥ä½œ

```bash
# æ¸¬è©¦ Sessions API
curl http://localhost:8000/debug/sessions | jq

# æ¸¬è©¦ Stats API
curl http://localhost:8000/debug/stats | jq
```

## ğŸ¯ é æœŸè¡Œç‚º

### å ´æ™¯ 1: æ²’æœ‰ PDU Session
**Demo ç¶²ç«™æœƒé¡¯ç¤º:**
- ğŸ“Š çµ±è¨ˆ: 0 Active Sessions
- ğŸ“‹ Session åˆ—è¡¨: å‹å¥½çš„æç¤ºè¨Šæ¯ + å•Ÿå‹•æŒ‡ä»¤
- â° Timeline: "âš ï¸ No Active Sessions" æç¤º

### å ´æ™¯ 2: æœ‰ PDU Session
**Demo ç¶²ç«™æœƒé¡¯ç¤º:**
- ğŸ“Š çµ±è¨ˆ: çœŸå¯¦çš„ Session æ•¸é‡
- ğŸ“‹ Session åˆ—è¡¨: çœŸå¯¦çš„ SUPIã€IPã€DNNã€é–’ç½®æ™‚é–“
- â° Timeline: çœŸå¯¦çš„æ¸…ç†äº‹ä»¶

## ğŸ” ç›®å‰çš„ç‹€æ³

æ ¹æ“šä½ çš„åé¥‹ "å¯¦éš›ä¸Šæ²’æœ‰ 10.60.0.101 åˆ° 10.60.0.108"ï¼Œé€™æ˜¯**æ­£ç¢ºçš„è¡Œç‚º**!

- âœ… Demo ç¶²ç«™**ä¸å†é¡¯ç¤ºå‡æ•¸æ“š**
- âœ… ç•¶æ²’æœ‰çœŸå¯¦ Session æ™‚ï¼Œé¡¯ç¤º "No Active PDU Sessions"
- âœ… æä¾›å•Ÿå‹• UE çš„æŒ‡ä»¤

é€™æ¯”ä¹‹å‰é¡¯ç¤ºå‡æ•¸æ“šè¦å¥½å¾—å¤šï¼Œå› ç‚º:
1. èª å¯¦åœ°åæ˜ ç³»çµ±ç‹€æ…‹
2. å¼•å°ç”¨æˆ¶å¦‚ä½•å»ºç«‹çœŸå¯¦ Session
3. é¿å…èª¤å°

## ğŸ“ æ¸¬è©¦æ­¥é©Ÿ

### å®Œæ•´æ¸¬è©¦æµç¨‹:

1. **é‡å•Ÿ free5GC** (è¼‰å…¥æ–°çš„ SMF API)
   ```bash
   cd /home/ubuntu/CNDI_final/free5gc
   # åœæ­¢èˆŠçš„ (Ctrl+C)
   ./run.sh
   ```

2. **é–‹å•Ÿ Demo ç¶²ç«™**
   ```bash
   cd /home/ubuntu/CNDI_final/demo
   ./start-demo.sh
   ```
   ç€è¦½å™¨: `http://localhost:8080`

3. **æ­¤æ™‚æ‡‰è©²çœ‹åˆ° "No Active PDU Sessions"** âœ…

4. **å»ºç«‹ UE Session**
   ```bash
   cd /home/ubuntu/CNDI_final/free-ran-ue
   make ns-ue
   ```

5. **ç­‰å¾…å¹¾ç§’ï¼ŒDemo ç¶²ç«™æœƒè‡ªå‹•æ›´æ–°** (æ¯ 5 ç§’åˆ·æ–°)
   - æ‡‰è©²æœƒçœ‹åˆ°çœŸå¯¦çš„ Session å‡ºç¾
   - é¡¯ç¤ºçœŸå¯¦çš„ SUPI (ä¾‹å¦‚: imsi-208930000000001)
   - é¡¯ç¤ºçœŸå¯¦çš„ IP (ä¾‹å¦‚: 10.60.0.1)
   - é¡¯ç¤ºçœŸå¯¦çš„ DNN (ä¾‹å¦‚: internet)

6. **æ¸¬è©¦æµé‡æª¢æ¸¬**
   ```bash
   sudo ip netns exec ue1 ping -I uesimtun0 8.8.8.8
   ```
   - é–’ç½®æ™‚é–“æ‡‰è©²ä¿æŒä½å€¼

7. **åœæ­¢ pingï¼Œæ¸¬è©¦é–’ç½®è¶…æ™‚**
   - é–’ç½®æ™‚é–“æ‡‰è©²é€æ¼¸å¢åŠ 
   - è¶…æ™‚å¾Œ Session æœƒè¢«æ¸…ç†

## ğŸ¨ è¦–è¦ºæ•ˆæœ

### ç©ºç‹€æ…‹ (æ²’æœ‰ Session)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ğŸ“±                      â”‚
â”‚   No Active PDU Sessions        â”‚
â”‚                                 â”‚
â”‚ Start a UE to see real-time    â”‚
â”‚ session data                    â”‚
â”‚                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ cd .../free-ran-ue          â”‚ â”‚
â”‚ â”‚ make ns-ue                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æœ‰ Session
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PDU-1              [Active]     â”‚
â”‚ SUPI: imsi-208930000000001      â”‚
â”‚ IP: 10.60.0.1                   â”‚
â”‚ DNN: internet                   â”‚
â”‚ Idle Time: 5s                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ ç¸½çµ

**å•é¡Œ**: Web ä¸Šé¡¯ç¤ºçš„ä¸æ˜¯çœŸå¯¦æ•¸æ“š (10.60.0.101-108 æ˜¯å‡çš„)

**è§£æ±ºæ–¹æ¡ˆ**:
1. âœ… ä¿®æ­£ API ç«¯å£ (8000)
2. âœ… é‡æ–°ç·¨è­¯ SMF
3. âœ… æ”¹é€²ç©ºç‹€æ…‹é¡¯ç¤º
4. â³ **éœ€è¦é‡å•Ÿ free5GC** ä¾†è¼‰å…¥æ–° API

**ç¾åœ¨çš„è¡Œç‚º**:
- âœ… æ²’æœ‰ Session æ™‚é¡¯ç¤ºå‹å¥½æç¤º (ä¸æ˜¯å‡æ•¸æ“š)
- âœ… æœ‰ Session æ™‚é¡¯ç¤ºçœŸå¯¦æ•¸æ“š
- âœ… æ¯ 5 ç§’è‡ªå‹•åˆ·æ–°

**ä¸‹ä¸€æ­¥**: é‡å•Ÿ free5GCï¼Œç„¶å¾Œå»ºç«‹ UE Session ä¾†çœ‹åˆ°çœŸå¯¦æ•¸æ“š!
